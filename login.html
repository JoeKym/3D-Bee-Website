<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Login - JoeKym Labs TM</title>
    <meta name="description" content="Login to JoeKym Labs TM - Access your account and explore our 3D animation and web development services.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://public.codepenassets.com/css/normalize-5.0.0.min.css">
    <link rel="stylesheet" href="./style.css">
    <style>
      .login-container {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2em;
        position: relative;
      }
      .login-box {
        background-color: rgba(27, 27, 27, 0.9);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(238, 248, 206, 0.1);
        border-radius: 20px;
        padding: 3em 2.5em;
        width: min(450px, 90vw);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      .login-header {
        text-align: center;
        margin-bottom: 2.5em;
      }
      .login-header h1 {
        font-family: "devil breeze", sans-serif;
        font-size: 3em;
        color: #d1ff48;
        margin-bottom: 0.5em;
        font-weight: bold;
      }
      .login-header p {
        color: #eef8ce;
        font-size: 1em;
        opacity: 0.8;
      }
      .login-form {
        display: flex;
        flex-direction: column;
        gap: 1.5em;
      }
      .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.5em;
      }
      .form-group label {
        color: #eef8ce;
        font-size: 0.9em;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .form-group input {
        background-color: rgba(238, 248, 206, 0.05);
        border: 1px solid rgba(238, 248, 206, 0.2);
        border-radius: 8px;
        padding: 1em;
        color: #eef8ce;
        font-size: 1em;
        font-family: "Poppins", sans-serif;
        transition: all 0.3s ease;
      }
      .form-group input:focus {
        outline: none;
        border-color: #d1ff48;
        background-color: rgba(238, 248, 206, 0.08);
        box-shadow: 0 0 0 3px rgba(209, 255, 72, 0.1);
      }
      .form-group input::placeholder {
        color: rgba(238, 248, 206, 0.4);
      }
      .login-button {
        background-color: #d1ff48;
        color: #1b1b1b;
        border: none;
        border-radius: 8px;
        padding: 1em 2em;
        font-size: 1.1em;
        font-weight: 600;
        font-family: "Poppins", sans-serif;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 0.5em;
      }
      .login-button:hover {
        background-color: #c4f038;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(209, 255, 72, 0.3);
      }
      .login-button:active {
        transform: translateY(0);
      }
      .login-footer {
        text-align: center;
        margin-top: 2em;
        padding-top: 2em;
        border-top: 1px solid rgba(238, 248, 206, 0.1);
      }
      .login-footer p {
        color: rgba(238, 248, 206, 0.7);
        font-size: 0.9em;
        margin-bottom: 1em;
      }
      .login-footer a {
        color: #d1ff48;
        text-decoration: none;
        transition: color 0.3s ease;
      }
      .login-footer a:hover {
        color: #c4f038;
        text-decoration: underline;
      }
      .back-link {
        position: absolute;
        top: 2em;
        left: 2em;
        color: #eef8ce;
        text-decoration: none;
        font-size: 1em;
        display: flex;
        align-items: center;
        gap: 0.5em;
        transition: color 0.3s ease;
        z-index: 10;
      }
      .back-link:hover {
        color: #d1ff48;
      }
      .error-message {
        background-color: rgba(255, 0, 0, 0.1);
        border: 1px solid rgba(255, 0, 0, 0.3);
        color: #ff6b6b;
        padding: 1em;
        border-radius: 8px;
        font-size: 0.9em;
        display: none;
      }
      .error-message.show {
        display: block;
      }
      .remember-forgot {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.9em;
      }
      .remember-forgot label {
        display: flex;
        align-items: center;
        gap: 0.5em;
        cursor: pointer;
        color: #eef8ce;
        font-weight: normal;
        text-transform: none;
      }
      .remember-forgot input[type="checkbox"] {
        width: auto;
        margin: 0;
        cursor: pointer;
      }
      .remember-forgot a {
        color: #d1ff48;
        text-decoration: none;
        transition: color 0.3s ease;
      }
      .remember-forgot a:hover {
        color: #c4f038;
        text-decoration: underline;
      }
      @media screen and (max-width: 767px) {
        .login-header h1 {
          font-size: 2em;
        }
        .login-box {
          padding: 2em 1.5em;
        }
        .back-link {
          top: 1em;
          left: 1em;
        }
      }
    </style>
  </head>
    
  <body>
    <a href="/" class="back-link">‚Üê Back to Home</a>
    
    <div class="login-container">
      <div class="login-box">
        <div class="login-header">
          <h1>JoeKym Labs<sup>TM</sup></h1>
          <p>Welcome back! Please login to your account</p>
        </div>
        
        <div class="error-message" id="errorMessage"></div>
        
        <form class="login-form" id="loginForm" onsubmit="handleLogin(event)">
          <div class="form-group">
            <label for="email">Email Address</label>
            <input 
              type="email" 
              id="email" 
              name="email" 
              placeholder="Enter your email"
              required
              autocomplete="email"
            >
          </div>
          
          <div class="form-group">
            <label for="password">Password</label>
            <input 
              type="password" 
              id="password" 
              name="password" 
              placeholder="Enter your password"
              required
              autocomplete="current-password"
            >
          </div>
          
          <div class="remember-forgot">
            <label>
              <input type="checkbox" name="remember" id="remember">
              Remember me
            </label>
            <a href="#forgot-password">Forgot password?</a>
          </div>
          
          <button type="submit" class="login-button">Login</button>
        </form>
        
        <div class="login-footer">
          <p>Don't have an account? <a href="/signup/">Sign up here</a></p>
          <p style="margin-top: 1em; font-size: 0.8em; opacity: 0.6;">
            &copy; 2024 JoeKym Labs<sup>TM</sup>. All rights reserved.
          </p>
        </div>
      </div>
    </div>
    
    <script>
      const LOGIN_ENDPOINT = "https://script.google.com/macros/s/AKfycbxhSH7hHN0nZKWB7EyGvrlFbFuuaLFBCvxgtcb8HaZb8qi0KrWJpHNW_tBmvI3YCc7HjA/exec";

      function handleLogin(event) {
        event.preventDefault();
        
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const errorMessage = document.getElementById('errorMessage');
        
        // Basic validation
        if (!email || !password) {
          showError('Please fill in all fields');
          return;
        }
        
        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          showError('Please enter a valid email address');
          return;
        }
        
        hideError();

        // Google Apps Script Web Apps - use hidden iframe form submission
        // This avoids CORS issues and redirect problems
        const iframe = document.createElement('iframe');
        iframe.name = 'hiddenLoginFrame';
        iframe.style.display = 'none';
        document.body.appendChild(iframe);
        
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = LOGIN_ENDPOINT;
        form.target = 'hiddenLoginFrame';
        
        // Add form fields
        const emailInput = document.createElement('input');
        emailInput.type = 'hidden';
        emailInput.name = 'email';
        emailInput.value = email;
        form.appendChild(emailInput);
        
        const passwordInput = document.createElement('input');
        passwordInput.type = 'hidden';
        passwordInput.name = 'password';
        passwordInput.value = password;
        form.appendChild(passwordInput);
        
        document.body.appendChild(form);
        
        // Listen for iframe load to detect completion
        iframe.onload = function() {
          // Store user data for profile page
          sessionStorage.setItem('userEmail', email);
          sessionStorage.setItem('loginDate', new Date().toISOString());
          
          // Data has been submitted to Google Sheets
          alert('Login successful! Redirecting to your profile...');
          setTimeout(() => {
            document.body.removeChild(form);
            document.body.removeChild(iframe);
            window.location.href = '/profile/';
          }, 500);
        };
        
        // Submit the form
        form.submit();
      }
      
      function showError(message) {
        const errorMessage = document.getElementById('errorMessage');
        errorMessage.textContent = message;
        errorMessage.classList.add('show');
        setTimeout(() => {
          hideError();
        }, 5000);
      }
      
      function hideError() {
        const errorMessage = document.getElementById('errorMessage');
        errorMessage.classList.remove('show');
      }
    </script>
  </body>
  
</html>

